!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("react"),require("styled-components")):"function"==typeof define&&define.amd?define(["react","styled-components"],n):"object"==typeof exports?exports.MinimalEditor=n(require("react"),require("styled-components")):e.MinimalEditor=n(e.react,e["styled-components"])}(window,function(e,n){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=10)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n,t){"use strict";var r,o=this&&this.__extends||(r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&(t[r[o]]=e[r[o]])}return t},c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var u=c(t(0)),f=l(t(3)),s=c(t(4));function d(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}function p(e){var n=function e(n){if(n.nodeType===Node.TEXT_NODE)return n;for(var t=n.childNodes,r=t.length-1;r>=0;r--){var o=e(t[r]);if(null!==o)return o}return null}(e),t=document.activeElement===e;if(null!==n&&null!==n.nodeValue&&t){var r=document.createRange(),o=window.getSelection();r.setStart(n,n.nodeValue.length),r.collapse(!0),o.removeAllRanges(),o.addRange(r),e instanceof HTMLElement&&e.focus()}}var h=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.lastHtml=n.props.html,n.el="function"==typeof n.props.innerRef?{current:null}:u.createRef(),n.getEl=function(){return(n.props.innerRef&&"function"!=typeof n.props.innerRef?n.props.innerRef:n.el).current},n.emitChange=function(e){var t=n.getEl();if(t){var r=t.innerHTML;if(n.props.onChange&&r!==n.lastHtml){var o=Object.assign({},e,{target:{value:r}});n.props.onChange(o)}n.lastHtml=r}},n}return o(n,e),n.prototype.render=function(){var e=this,n=this.props,t=n.tagName,r=n.html,o=n.innerRef,c=a(n,["tagName","html","innerRef"]);return u.createElement(t||"div",i({},c,{ref:"function"==typeof o?function(n){o(n),e.el.current=n}:o||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},n.prototype.shouldComponentUpdate=function(e){var n=this.props,t=this.getEl();return!t||(d(e.html)!==d(t.innerHTML)||(n.disabled!==e.disabled||n.tagName!==e.tagName||n.className!==e.className||n.innerRef!==e.innerRef||!f.default(n.style,e.style)))},n.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.lastHtml=this.props.html),p(e))},n.propTypes={html:s.string.isRequired,onChange:s.func,onBlur:s.func,onKeyDown:s.func,disabled:s.bool,tagName:s.string,className:s.string,style:s.object,innerRef:s.oneOfType([s.object,s.func])},n}(u.Component);n.default=h},function(e,n,t){"use strict";var r=Array.isArray,o=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(n,t){if(n===t)return!0;if(n&&t&&"object"==typeof n&&"object"==typeof t){var a,c,l,u=r(n),f=r(t);if(u&&f){if((c=n.length)!=t.length)return!1;for(a=c;0!=a--;)if(!e(n[a],t[a]))return!1;return!0}if(u!=f)return!1;var s=n instanceof Date,d=t instanceof Date;if(s!=d)return!1;if(s&&d)return n.getTime()==t.getTime();var p=n instanceof RegExp,h=t instanceof RegExp;if(p!=h)return!1;if(p&&h)return n.toString()==t.toString();var b=o(n);if((c=b.length)!==o(t).length)return!1;for(a=c;0!=a--;)if(!i.call(t,b[a]))return!1;for(a=c;0!=a--;)if(!e(n[l=b[a]],t[l]))return!1;return!0}return n!=n&&t!=t}},function(e,n,t){e.exports=t(5)()},function(e,n,t){"use strict";var r=t(6);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,n,t,o,i,a){if(a!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function n(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:o};return t.PropTypes=t,t}},function(e,n,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,n,t){e.exports=t.p+"8544ed41991f4a2c8ad14c865b8407ba.woff"},function(e,n,t){e.exports=t.p+"8c0fdf99e8ac6d0a9035ba093e92d886.woff2"},function(e,n,t){e.exports=t.p+"cb78978b70fd039acc05a25ddd7606d5.svg"},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(2),a=t.n(i),c=t(1),l=t.n(c);function u(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n  @font-face {\n    font-family: 'izicons';\n    src: url(",") format('woff2'),\n         url(",") format('woff'),\n         url(",") format('svg');\n    font-weight: normal;\n    font-style: normal;\n  }\n"]);return u=function(){return e},e}var f=t(7),s=t(8),d=t(9),p=Object(c.createGlobalStyle)(u(),s,f,d);function h(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n  min-width: 24px;\n  min-height: 24px;\n  display: inline-block;\n  vertical-align: middle;\n\n  &:before {\n    font-family: 'izicons';\n    content: \"",'";\n    display: inline-block;\n  }\n']);return h=function(){return e},e}var b=l.a.span(h(),function(e){return e.content});function g(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n  appearance: none;\n  outline: none;\n\n  width: 30px;\n  height: 30px;\n  margin: 6px;\n  padding: 0;\n  display: inline-block;\n  vertical-align: middle;\n  border: 0;\n  border-radius: 4px;\n  font-size: 18px;\n  transition: all .3s ease-in-out;\n  transition: background-color 200 ease-in-out;\n\n  &:hover {\n    background-color: rgba(32,33,36,0.059);\n  }\n\n  &:active {\n    background-color: #aaa;\n  }\n\n  & ",":before {\n    min-width: 30px;\n    min-height: 30px;\n    font-size: 18px;\n    line-height: 30px;\n  }\n\n  ","\n"]);return g=function(){return e},e}var v=l.a.button(g(),b,function(e){return e.checked?"\n      background-color: rgba(32,33,36,0.122);\n      &:hover {\n        background-color: rgba(32,33,36,0.122);\n      }\n    ":""}),m=function(e,n){var t=e.getSelection();return{restore:function(){t&&t.rangeCount>0&&!t.getRangeAt(0).collapsed||n.focus()}}},y=function(e,n){return e&&"function"==typeof e.queryCommandSupported?e.queryCommandSupported(n)?void 0:"unsupported":"unavailable"},x=function(e){var n=e.content,t=e.command,r=e.document,i=e.window,a=e.root,c=e.onChange,l=function(e,n){return void 0!==y(n,e)}(t,r),u=function(e,n){return n.queryCommandState(e)}(t,r);return o.a.createElement(v,{disabled:l,checked:u,content:n,onClick:function(){return function(e,n,t,r,o){r.focus();var i=m(t,r);n.execCommand(e),i.restore(),o()}(t,r,i,a,c)},children:o.a.createElement(b,{content:n})})};function O(){return(O=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var w=function(e){return o.a.createElement(x,O({content:"b",command:"bold"},e))};w.key="Bold";var k=w;function j(){return(j=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var C=function(e){return o.a.createElement(x,j({content:"i",command:"italic"},e))};C.key="Italic";var E=C;function S(){return(S=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var P=function(e){return o.a.createElement(x,S({content:"u",command:"underline"},e))};P.key="Underline";var _=P;function z(){return(z=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var D=function(e){return o.a.createElement(x,z({content:"s",command:"strikeThrough"},e))};D.key="Strike";var T=D;function R(){return(R=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var F=function(e){return o.a.createElement(x,R({content:"O",command:"insertOrderedList"},e))};F.key="OrderedList";var L=F;function I(){return(I=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var U=function(e){return o.a.createElement(x,I({content:"U",command:"insertUnorderedList"},e))};U.key="UnorderedList";var M=U;function N(){return(N=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var A=function(e){return o.a.createElement(x,N({content:"r",command:"justifyRight"},e))};A.key="Right";var B=A;function H(){return(H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var q=function(e){return o.a.createElement(x,H({content:"l",command:"justifyLeft"},e))};q.key="Left";var W=q;function G(){return(G=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var V=function(e){return o.a.createElement(x,G({content:"c",command:"justifyCenter"},e))};V.key="Center";var K=V;function Y(){return(Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var J=function(e){return o.a.createElement(x,Y({content:"j",command:"justifyFull"},e))};J.key="Justify";var X=J,Q={1:"Tiny",2:"Small",3:"Normal",4:"Big",5:"Large",6:"Huge"},Z="1,2,3,4,5,6".split(",");function $(){var e=oe(["\n  display: block;\n  position: absolute;\n  right: 2px;\n  top: 0;\n  font-size: 12px;\n  min-width: 14px;\n  width: 14px;\n  line-height: 30px;\n\n  &:before {\n    ","\n  }\n"]);return $=function(){return e},e}function ee(){var e=oe(["\n  position: absolute;\n  top: 100%;\n  border: 1px solid silver;\n  padding: 5px 0;\n  background: white;\n  right: -7px;\n  box-shadow: 1px 1px 6px #aaa;\n  box-sizing: border-box;\n"]);return ee=function(){return e},e}function ne(){var e=oe(["\n  padding: 2px 10px;\n  white-space: nowrap;\n\n  ",'\n  &:hover {\n    background-color: #eee;\n  }\n  line-height: 1em;\n  font {\n    line-height: 1em;\n    &[size="1"] {\n      line-height: 2.5em;\n    }\n    &[size="2"] {\n      line-height: 2.1em;\n    }\n    &[size="3"] {\n      line-height: 1.8em;\n    }\n    &[size="4"] {\n      line-height: 1.4em;\n    }\n    &[size="5"] {\n      line-height: 1.2em;\n    }\n  }\n']);return ne=function(){return e},e}function te(){var e=oe(["\n  width: 40px;\n  height: 30px;\n  font-size: 22px;\n  line-height: 30px;\n  border-radius: 4px;\n  text-align: center;\n  padding-right: 10px;\n  box-sizing: border-box;\n  display: block;\n"]);return te=function(){return e},e}function re(){var e=oe(["\n  position: relative;\n  height: 100%;\n  min-width: 42px;\n  height: 30px;\n  margin: 6px;\n  box-sizing: border-box;\n  display: inline-block;\n  vertical-align: middle;\n  ","\n"]);return re=function(){return e},e}function oe(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var ie=l.a.div.attrs(function(e){return{id:"FontSizeDropDown"}})(re(),function(e){return e.expanded&&"\n      ".concat(ae," {\n        background-color: rgba(32,33,36,0.122);\n      }\n    ")}),ae=l()(b).attrs(function(e){return{content:"a"}})(te()),ce=l.a.div(ne(),function(e){return e.active?"\n      &:before {\n        content: '✓';\n        display: inline-block;\n        width: 20px;\n        vertical-align: middle;\n      }\n    ":"\n      padding-left: 30px;\n    "}),le=l.a.div(ee()),ue=l()(b).attrs(function(e){return{content:"⬇︎"}})($(),function(e){return e.expanded&&"\n        transform: rotate3d(0, 0, 1, 180deg);;\n      "});function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,n){return(he=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var be=function(e){function n(e){var t,r,o;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,o=de(n).call(this,e),(t=!o||"object"!==fe(o)&&"function"!=typeof o?pe(r):o).handleDropdownToggle=t.handleDropdownToggle.bind(pe(t)),t.handleClickOutside=t.handleClickOutside.bind(pe(t)),t.onItemSelect={},Z.forEach(function(e){t.onItemSelect[e]=function(){return t.handleDropdownSelect(e)}});e.document;return t.state={expanded:!1},t}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&he(e,n)}(n,o.a.Component),t=n,(r=[{key:"componentWillReceiveProps",value:function(e){var n=this.props||e,t=n&&n.document,r=this.isAvailable(t);if(r){var o=this.getFontSize(t);this.setState({enabled:r,size:o})}}},{key:"isAvailable",value:function(e){return!(void 0!==y(e,"fontSize")||!e.queryCommandEnabled("fontSize"))}},{key:"handleClickOutside",value:function(e){this.state.expanded&&(e.target.closest("#".concat("FontSizeDropDown"))||(e.preventDefault(),e.stopPropagation(),this.setState({expanded:!1})))}},{key:"componentDidMount",value:function(){var e=this.props.document;e.addEventListener("click",this.handleClickOutside,!1),e.addEventListener("touchstart",this.handleClickOutside,!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.document;e.removeEventListener("click",this.handleClickOutside,!1),e.removeEventListener("touchstart",this.handleClickOutside,!1)}},{key:"getFontSize",value:function(e){return e.queryCommandValue("fontSize")||"3"}},{key:"focusedUpdate",value:function(e,n){var t=this.props,r=t.root,o=t.window,i=t.document,a=t.onChange;r.focus();var c=m(o,r);i.execCommand(e,!1,n),c.restore(),a()}},{key:"handleDropdownSelect",value:function(e){this.focusedUpdate("fontSize",e),this.setState({size:e,expanded:!1})}},{key:"handleDropdownToggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"renderDropdownItem",value:function(e){var n=this.state.size===e;return o.a.createElement(ce,{key:"dropItem".concat(e),active:n,children:o.a.createElement("font",{size:e},Q[e]),onClick:this.onItemSelect[e]})}},{key:"renderDropdown",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,Z.map(function(n){return e.renderDropdownItem(n)}))}},{key:"render",value:function(){var e=this.state,n=(e.size,e.up,e.down,e.enabled,e.expanded);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{expanded:n,onClick:this.handleDropdownToggle},o.a.createElement(ae,null),o.a.createElement(ue,{expanded:n}),n&&o.a.createElement(le,{children:this.renderDropdown()})))}}])&&se(t.prototype,r),i&&se(t,i),n}();be.key="FontSize";var ge=be,ve=[{id:"100",title:"x0",value:"1em"},{id:"125",title:"x0.25",value:"1.25em"},{id:"150",title:"x0.5",value:"1.5em"},{id:"200",title:"x1",value:"2em"},{id:"250",title:"x1.5",value:"2.5em"},{id:"300",title:"x2",value:"3em"}];function me(){var e=ke(["\n  display: block;\n  position: absolute;\n  right: 2px;\n  top: 0;\n  font-size: 12px;\n  min-width: 14px;\n  width: 14px;\n  line-height: 30px;\n\n  &:before {\n    ","\n  }\n"]);return me=function(){return e},e}function ye(){var e=ke(["\n  position: absolute;\n  top: 100%;\n  border: 1px solid silver;\n  padding: 5px 0;\n  background: white;\n  right: -7px;\n  box-shadow: 1px 1px 6px #aaa;\n  box-sizing: border-box;\n"]);return ye=function(){return e},e}function xe(){var e=ke(["\n  padding: 2px 10px;\n  white-space: nowrap;\n\n  ",'\n  &:hover {\n    background-color: #eee;\n  }\n  line-height: 1em;\n  font {\n    line-height: 1em;\n    &[size="1"] {\n      line-height: 2.5em;\n    }\n    &[size="2"] {\n      line-height: 2.1em;\n    }\n    &[size="3"] {\n      line-height: 1.8em;\n    }\n    &[size="4"] {\n      line-height: 1.4em;\n    }\n    &[size="5"] {\n      line-height: 1.2em;\n    }\n  }\n']);return xe=function(){return e},e}function Oe(){var e=ke(["\n  width: 40px;\n  height: 30px;\n  font-size: 22px;\n  line-height: 30px;\n  border-radius: 4px;\n  text-align: center;\n  padding-right: 10px;\n  box-sizing: border-box;\n  display: block;\n"]);return Oe=function(){return e},e}function we(){var e=ke(["\n  position: relative;\n  height: 100%;\n  min-width: 42px;\n  height: 30px;\n  margin: 6px;\n  box-sizing: border-box;\n  display: inline-block;\n  vertical-align: middle;\n  ","\n"]);return we=function(){return e},e}function ke(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var je=l.a.div.attrs(function(e){return{id:"FontSizeDropDown"}})(we(),function(e){return e.expanded&&"\n      ".concat(Ce," {\n        background-color: rgba(32,33,36,0.122);\n      }\n    ")}),Ce=l()(b).attrs(function(e){return{content:"T"}})(Oe()),Ee=l.a.div(xe(),function(e){return e.active?"\n      &:before {\n        content: '✓';\n        display: inline-block;\n        width: 20px;\n        vertical-align: middle;\n      }\n    ":"\n      padding-left: 30px;\n    "}),Se=l.a.div(ye()),Pe=l()(b).attrs(function(e){return{content:"⬇︎"}})(me(),function(e){return e.expanded&&"\n        transform: rotate3d(0, 0, 1, 180deg);;\n      "}),_e=function(e){var n=e.item,t=e.onClick,r=e.value;return o.a.createElement(Ee,{key:n.id,active:r===n.value,onClick:t,children:n.title})},ze=function(e){var n=e.onChange,t=e.value,r=e.items;return r.map(function(e){return o.a.createElement(_e,{key:e.id,onClick:function(){return function(e){"function"==typeof n&&t!==e.value&&n.call(void 0,e.value)}(e)},value:t,item:e})})};function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,n){return(Le=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Ie=function(e){function n(e){var t,r,o;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(o=Re(n).call(this,e))||"object"!==De(o)&&"function"!=typeof o?Fe(r):o).handleDropdownToggle=t.handleDropdownToggle.bind(Fe(t)),t.handleClickOutside=t.handleClickOutside.bind(Fe(t)),t.handleDropdownSelect=t.handleDropdownSelect.bind(Fe(t));e.document;return t.state={expanded:!1,value:void 0},t}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Le(e,n)}(n,o.a.Component),t=n,(r=[{key:"componentWillReceiveProps",value:function(e){var n=this.props||e,t=n&&n.document,r=this.isAvailable(t);if(r){var o=this.getValue(t);this.setState({enabled:r,value:o})}}},{key:"isAvailable",value:function(e){return!(void 0!==y(e,"formatBlock")||!e.queryCommandEnabled("formatBlock"))}},{key:"handleClickOutside",value:function(e){this.state.expanded&&(e.target.closest("#".concat("FontSizeDropDown"))||(e.preventDefault(),e.stopPropagation(),this.setState({expanded:!1})))}},{key:"componentDidMount",value:function(){var e=this.props.document;e.addEventListener("click",this.handleClickOutside,!1),e.addEventListener("touchstart",this.handleClickOutside,!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.document;e.removeEventListener("click",this.handleClickOutside,!1),e.removeEventListener("touchstart",this.handleClickOutside,!1)}},{key:"getValue",value:function(e){var n=this.filterSelection(),t=void 0;if(n){var r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var l=a.value,u=l&&l.style&&l.style.lineHeight;if(void 0!==u){if(void 0!==t&&t!==u)return;t=u}}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t||void 0}}},{key:"filterSelection",value:function(){var e=this.props.root,n=document.getSelection();if(n&&n.rangeCount>0){var t=n.getRangeAt(0);return Array.prototype.slice.call(e.childNodes).filter(function(e){return t.intersectsNode(e)})}}},{key:"focusedUpdate",value:function(e){var n=this.props,t=n.root,r=n.window,o=(n.document,n.onChange);t.focus();var i=m(r,t),a=this.filterSelection();if(a){var c=!1;if(a.forEach(function(n){n&&n.style&&n.style.lineHeight!==e&&(n.style.lineHeight=e,c=!0)}),i.restore(),c){var l=t.innerHTML;o.call(this,{html:l})}}}},{key:"handleDropdownSelect",value:function(e){this.focusedUpdate(e),this.setState({value:e,expanded:!1})}},{key:"handleDropdownToggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"renderDropdownItem",value:function(e){var n=this.state.value===e.value;return o.a.createElement(Ee,{key:"dropItem".concat(e.id),active:n,children:e.title})}},{key:"renderDropdown",value:function(){return o.a.createElement(ze,{items:ve,onChange:this.handleDropdownSelect,value:this.state.value})}},{key:"render",value:function(){var e=this.state,n=(e.size,e.up,e.down,e.enabled,e.expanded);return o.a.createElement(o.a.Fragment,null,o.a.createElement(je,{expanded:n,onClick:this.handleDropdownToggle},o.a.createElement(Ce,null),o.a.createElement(Pe,{expanded:n}),n&&o.a.createElement(Se,{children:this.renderDropdown()})))}}])&&Te(t.prototype,r),i&&Te(t,i),n}();Ie.key="LineHeight";var Ue=Ie,Me=[{id:"000000",title:"Black",rgb:"rgb(0, 0, 0)"},{id:"444444",title:"#444444",rgb:"rgb(68, 68, 68)"},{id:"666666",title:"#666666",rgb:"rgb(102, 102, 102)"},{id:"999999",title:"#999999",rgb:"rgb(153, 153, 153)"},{id:"cccccc",title:"#cccccc",rgb:"rgb(204, 204, 204)"},{id:"eeeeee",title:"#eeeeee",rgb:"rgb(238, 238, 238)"},{id:"f3f3f3",title:"#f3f3f3",rgb:"rgb(243, 243, 243)"},{id:"ffffff",title:"White",rgb:"rgb(255, 255, 255)"},{id:"ff0000",title:"Red",rgb:"rgb(255, 0, 0)"},{id:"ff9900",title:"#ff9900",rgb:"rgb(255, 153, 0)"},{id:"ffff00",title:"Yellow",rgb:"rgb(255, 255, 0)"},{id:"00ff00",title:"Lime",rgb:"rgb(0, 255, 0)"},{id:"00ffff",title:"Aqua",rgb:"rgb(0, 255, 255)"},{id:"0000ff",title:"Blue",rgb:"rgb(0, 0, 255)"},{id:"9900ff",title:"#9900ff",rgb:"rgb(153, 0, 255)"},{id:"ff00ff",title:"Fuchsia",rgb:"rgb(255, 0, 255)"},{id:"f4cccc",title:"#f4cccc",rgb:"rgb(244, 204, 204)"},{id:"fce5cd",title:"#fce5cd",rgb:"rgb(252, 229, 205)"},{id:"fff2cc",title:"#fff2cc",rgb:"rgb(255, 242, 204)"},{id:"d9ead3",title:"#d9ead3",rgb:"rgb(217, 234, 211)"},{id:"d0e0e3",title:"#d0e0e3",rgb:"rgb(208, 224, 227)"},{id:"cfe2f3",title:"#cfe2f3",rgb:"rgb(207, 226, 243)"},{id:"d9d2e9",title:"#d9d2e9",rgb:"rgb(217, 210, 233)"},{id:"ead1dc",title:"#ead1dc",rgb:"rgb(234, 209, 220)"},{id:"ea9999",title:"#ea9999",rgb:"rgb(234, 153, 153)"},{id:"f9cb9c",title:"#f9cb9c",rgb:"rgb(249, 203, 156)"},{id:"ffe599",title:"#ffe599",rgb:"rgb(255, 229, 153)"},{id:"b6d7a8",title:"#b6d7a8",rgb:"rgb(182, 215, 168)"},{id:"a2c4c9",title:"#a2c4c9",rgb:"rgb(162, 196, 201)"},{id:"9fc5e8",title:"#9fc5e8",rgb:"rgb(159, 197, 232)"},{id:"b4a7d6",title:"#b4a7d6",rgb:"rgb(180, 167, 214)"},{id:"d5a6bd",title:"#d5a6bd",rgb:"rgb(213, 166, 189)"},{id:"e06666",title:"#e06666",rgb:"rgb(224, 102, 102)"},{id:"f6b26b",title:"#f6b26b",rgb:"rgb(246, 178, 107)"},{id:"ffd966",title:"#ffd966",rgb:"rgb(255, 217, 102)"},{id:"93c47d",title:"#93c47d",rgb:"rgb(147, 196, 125)"},{id:"76a5af",title:"#76a5af",rgb:"rgb(118, 165, 175)"},{id:"6fa8dc",title:"#6fa8dc",rgb:"rgb(111, 168, 220)"},{id:"8e7cc3",title:"#8e7cc3",rgb:"rgb(142, 124, 195)"},{id:"c27ba0",title:"#c27ba0",rgb:"rgb(194, 123, 160)"},{id:"cc0000",title:"#cc0000",rgb:"rgb(204, 0, 0)"},{id:"e69138",title:"#e69138",rgb:"rgb(230, 145, 56)"},{id:"f1c232",title:"#f1c232",rgb:"rgb(241, 194, 50)"},{id:"6aa84f",title:"#6aa84f",rgb:"rgb(106, 168, 79)"},{id:"45818e",title:"#45818e",rgb:"rgb(69, 129, 142)"},{id:"3d85c6",title:"#3d85c6",rgb:"rgb(61, 133, 198)"},{id:"674ea7",title:"#674ea7",rgb:"rgb(103, 78, 167)"},{id:"a64d79",title:"#a64d79",rgb:"rgb(166, 77, 121)"},{id:"990000",title:"#990000",rgb:"rgb(153, 0, 0)"},{id:"b45f06",title:"#b45f06",rgb:"rgb(180, 95, 6)"},{id:"bf9000",title:"#bf9000",rgb:"rgb(191, 144, 0)"},{id:"38761d",title:"#38761d",rgb:"rgb(56, 118, 29)"},{id:"134f5c",title:"#134f5c",rgb:"rgb(19, 79, 92)"},{id:"0b5394",title:"#0b5394",rgb:"rgb(11, 83, 148)"},{id:"351c75",title:"#351c75",rgb:"rgb(53, 28, 117)"},{id:"741b47",title:"#741b47",rgb:"rgb(116, 27, 71)"},{id:"660000",title:"#660000",rgb:"rgb(102, 0, 0)"},{id:"783f04",title:"#783f04",rgb:"rgb(120, 63, 4)"},{id:"7f6000",title:"#7f6000",rgb:"rgb(127, 96, 0)"},{id:"274e13",title:"#274e13",rgb:"rgb(39, 78, 19)"},{id:"0c343d",title:"#0c343d",rgb:"rgb(12, 52, 61)"},{id:"073763",title:"#073763",rgb:"rgb(7, 55, 99)"},{id:"20124d",title:"#20124d",rgb:"rgb(32, 18, 77)"},{id:"4c1130",title:"#4c1130",rgb:"rgb(76, 17, 48)"}];function Ne(){var e=Ye(["\n  display: block;\n  position: absolute;\n  right: 2px;\n  top: 0;\n  font-size: 12px;\n  min-width: 14px;\n  width: 14px;\n  line-height: 30px;\n\n  &:before {\n    ","\n  }\n"]);return Ne=function(){return e},e}function Ae(){var e=Ye(["\n  position: absolute;\n  top: 100%;\n  border: 1px solid silver;\n  padding: 5px 0;\n  background: white;\n  right: -7px;\n  box-shadow: 1px 1px 6px #aaa;\n  box-sizing: border-box;\n"]);return Ae=function(){return e},e}function Be(){var e=Ye(["\n  width: 40px;\n  height: 30px;\n  font-size: 22px;\n  line-height: 30px;\n  border-radius: 4px;\n  text-align: center;\n  padding-right: 10px;\n  box-sizing: border-box;\n  display: block;\n"]);return Be=function(){return e},e}function He(){var e=Ye(["\n  display: flex;\n"]);return He=function(){return e},e}function qe(){var e=Ye(["\n  display: block;\n  margin: 5px 0;\n"]);return qe=function(){return e},e}function We(){var e=Ye(["\n  margin: 0 7px 2px;\n  display: block;\n"]);return We=function(){return e},e}function Ge(){var e=Ye(["\n  display: flex;\n  margin-bottom: 10px;\n  & + & + & {\n    margin-bottom: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]);return Ge=function(){return e},e}function Ve(){var e=Ye(["\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n  vertical-align: middle;\n  border: 1px solid #fff;\n  background: ",";\n  &:hover {\n    border: 1px solid #000;\n  }\n  ","\n"]);return Ve=function(){return e},e}function Ke(){var e=Ye(["\n  position: relative;\n  height: 100%;\n  min-width: 42px;\n  height: 30px;\n  margin: 6px;\n  box-sizing: border-box;\n  display: inline-block;\n  vertical-align: middle;\n  ","\n"]);return Ke=function(){return e},e}function Ye(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var Je=l.a.div.attrs(function(e){return{id:"FontColorDropDown"}})(Ke(),function(e){return e.expanded&&"\n      ".concat(nn," {\n        background-color: rgba(32,33,36,0.122);\n      }\n    ")}),Xe=l.a.span(Ve(),function(e){return e.color},function(e){return e.active&&"\n      outline: 1px solid #000;\n      z-index: 2;\n      &:before {\n        content: '✓';\n        display: block;\n        text-shadow: 0px 0px 2px #fff;\n        text-align: center;\n        width: 16px;\n        line-height: 16px;\n        font-size: 16px;\n      }\n    "}),Qe=l.a.div(Ge()),Ze=l.a.div(We()),$e=l.a.div(qe()),en=l.a.div(He()),nn=l()(b).attrs(function(e){return{content:"🎨"}})(Be()),tn=l.a.div(Ae()),rn=l()(b).attrs(function(e){return{content:"⬇︎"}})(Ne(),function(e){return e.expanded&&"\n        transform: rotate3d(0, 0, 1, 180deg);;\n      "});function on(){return(on=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var an=function(e){var n=e.items,t=e.onChange,r=e.value;return o.a.createElement(Qe,null,n.map(function(e){return o.a.createElement(Xe,{key:e.id,active:r===e.rgb,onClick:function(){return n=e,void("function"==typeof t&&r!==n.rgb&&t.call(void 0,n.rgb));var n},color:e.rgb,title:e.title})}))},cn=function(e){var n,t,r,i=e.onChange,a=e.value,c=e.colors,l=e.title,u=e.line,f=void 0===u?8:u,s={onChange:i,value:a};return o.a.createElement(Ze,null,l&&o.a.createElement($e,{children:l}),(n=c,t=f,r=0,new Array(Math.ceil(n.length/t)).join("*").split("*").map(function(){return n.slice(r,r+=t)})).map(function(e){return o.a.createElement(an,on({key:e[0].id,items:e},s))}))};function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(e,n){return(dn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var pn=function(e){function n(e){var t,r,o;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(o=fn(n).call(this,e))||"object"!==ln(o)&&"function"!=typeof o?sn(r):o).handleDropdownToggle=t.handleDropdownToggle.bind(sn(t)),t.handleClickOutside=t.handleClickOutside.bind(sn(t)),t.handleFgColor=t.handleFgColor.bind(sn(t)),t.handleBgColor=t.handleBgColor.bind(sn(t)),t.onItemSelect={},t.state={expanded:!1,fgColor:"rgb(0, 0, 0)",bgColor:"rgb(255, 255, 255)"},t}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&dn(e,n)}(n,o.a.Component),t=n,(r=[{key:"componentWillReceiveProps",value:function(e){var n=this.props||e,t=n&&n.document,r=this.isAvailable(t);if(r){var o=this.getFontSize(t);this.setState({enabled:r,size:o})}}},{key:"isAvailable",value:function(e){return!(void 0!==y(e,"fontSize")||!e.queryCommandEnabled("fontSize"))}},{key:"handleClickOutside",value:function(e){this.state.expanded&&(e.target.closest("#".concat("FontColorDropDown"))||(e.preventDefault(),e.stopPropagation(),this.setState({expanded:!1})))}},{key:"focusedUpdate",value:function(e,n){var t=this.props,r=t.root,o=t.window,i=t.document,a=t.onChange;r.focus();var c=m(o,r);i.execCommand(e,!1,n),c.restore(),a()}},{key:"handleFgColor",value:function(e){this.focusedUpdate("foreColor",e),this.setState({fgColor:e})}},{key:"handleBgColor",value:function(e){this.focusedUpdate("hiliteColor",e),this.setState({bgColor:e})}},{key:"componentDidMount",value:function(){var e=this.props.document;e.addEventListener("click",this.handleClickOutside,!1),e.addEventListener("touchstart",this.handleClickOutside,!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.document;e.removeEventListener("click",this.handleClickOutside,!1),e.removeEventListener("touchstart",this.handleClickOutside,!1)}},{key:"getFontSize",value:function(e){return e.queryCommandValue("fontSize")||"3"}},{key:"handleDropdownToggle",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"renderColorItem",value:function(e){var n=Math.random()<.2;return o.a.createElement(Xe,{key:"ColorItem".concat(e.id),color:e.rgb,active:n})}},{key:"renderDropdown",value:function(){var e=this.state,n=e.fgColor,t=e.bgColor;return o.a.createElement(en,null,o.a.createElement(cn,{title:"Background color",colors:Me,value:n,onChange:this.handleFgColor,line:8}),o.a.createElement(cn,{title:"Text color",colors:Me,value:t,onChange:this.handleBgColor,line:8}))}},{key:"render",value:function(){var e=this.state,n=(e.size,e.up,e.down,e.enabled,e.expanded);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Je,{expanded:n,onClick:this.handleDropdownToggle},o.a.createElement(nn,null),o.a.createElement(rn,{expanded:n}),n&&o.a.createElement(tn,{children:this.renderDropdown()})))}}])&&un(t.prototype,r),i&&un(t,i),n}();pn.key="FontColor";var hn=pn;function bn(){return(bn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var gn=function(e){return o.a.createElement(x,bn({content:"Aₐ",command:"subscript"},e))};gn.key="Sub";var vn=gn;function mn(){return(mn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var yn=function(e){return o.a.createElement(x,mn({content:"A²",command:"superscript"},e))};yn.key="Super";var xn=yn;function On(){return(On=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var wn=function(e){return o.a.createElement(x,On({content:"🧹",command:"removeFormat"},e))};wn.key="ClearFormat";var kn=wn;function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(){return(Cn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function En(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,n){return!n||"object"!==jn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,n){return(_n=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function zn(){var e=Tn(["\n  white-space: nowrap;\n  display: inline-block;\n  vertical-align: middle;\n"]);return zn=function(){return e},e}function Dn(){var e=Tn(["\n  display: flex;\n  justify-content: space-between;\n  margin: 3px auto;\n  border-radius: 4px;\n  border: 1px solid silver;\n  flex-wrap: wrap;\n"]);return Dn=function(){return e},e}function Tn(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var Rn=l.a.div(Dn()),Fn=l.a.div(zn()),Ln=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),Sn(this,Pn(n).apply(this,arguments))}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_n(e,n)}(n,o.a.PureComponent),t=n,(r=[{key:"renderGroup",value:function(e,n){return o.a.createElement(Fn,null,e.map(function(e){return o.a.createElement(e,Cn({key:e.key},n))}))}},{key:"render",value:function(){var e=this.props,n=e.root,t=e.document,r=(e.revision,e.onChange);if(void 0===n||void 0===t||void 0===window)return"";var i={root:n,document:t,window:window,onChange:r};return o.a.createElement(Rn,null,this.renderGroup([k,E,_,T],i),this.renderGroup([ge,hn,Ue],i),this.renderGroup([L,M],i),this.renderGroup([W,K,B,X],i),this.renderGroup([vn,xn],i),this.renderGroup([kn],i))}}])&&En(t.prototype,r),i&&En(t,i),n}();Ln.key="PaneItem";var In=Ln,Un=function(e,n){var t=e.getSelection();if(t&&t.rangeCount>0){var r=t&&t.getRangeAt(0);return{restore:function(){r&&(t.removeAllRanges(),t.addRange(r)),n.focus()}}}};function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e){for(var n=1;n<arguments.length;n++)if(n%2){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){An(e,n,t[n])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[n]));return e}function An(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Bn(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e,n){return(Wn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function Gn(){var e=function(e,n){n||(n=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n  border-radius: 4px;\n  border: 1px solid brown;\n\n  padding: 0.2em 1em;\n  margin: 0 auto;\n\n  .ContentEditable {\n    min-height: 200px;\n    display: block;\n    outline: none;\n    margin: 0;\n    padding: 0;\n    line-height: 2em;\n    p {\n      margin: 0;\n    }\n  }\n"]);return Gn=function(){return e},e}var Vn=l.a.div(Gn()),Kn=function(e){function n(){var e,t,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,(e=!(r=Hn(n).call(this))||"object"!==Mn(r)&&"function"!=typeof r?qn(t):r).contentEditable=o.a.createRef(),e.handleChange=e.handleChange.bind(qn(e)),e.handleBlur=e.handleBlur.bind(qn(e)),e.handleFocus=e.handleFocus.bind(qn(e)),e.handleCaretPosition=e.handleCaretPosition.bind(qn(e)),e.pushRefreshCaretPosition=e.pushRefreshCaretPosition.bind(qn(e)),e.forcedRevisionUpdate=e.forcedRevisionUpdate.bind(qn(e)),e.handleSelectionChange=e.handleSelectionChange.bind(qn(e)),e.updateTimerId=void 0,e.state={selection:void 0,revision:1,html:"\n        <p>Deer stuar, selswair checker for mine</p>\n        <p>I wanna do it</p>\n        <p>I wanna do it???</p>\n      "},e}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Wn(e,n)}(n,o.a.Component),t=n,(r=[{key:"handleChange",value:function(e){console.log("handleChange ContentEditable",e.target.value),this.handleCaretPosition(),this.setState({html:e.target.value})}},{key:"handleBlur",value:function(e){var n=Un(window,this.contentEditable.current);this.setState({selection:n})}},{key:"handleFocus",value:function(e){this.handleCaretPosition(e);var n=this.state.selection;void 0!==n&&n.restore()}},{key:"pushRefreshCaretPosition",value:function(){this.updateTimerId=null,this.forcedRevisionUpdate()}},{key:"handleCaretPosition",value:function(e){(new Date).getTime();this.updateTimerId&&clearTimeout(this.updateTimerId),this.updateTimerId=setTimeout(this.pushRefreshCaretPosition,300)}},{key:"isInside",value:function(e,n){if(!e)return!1;if(e.isSameNode(n))return!0;for(;e=e.parentNode;)if(e.isSameNode(n))return!0;return!1}},{key:"handleSelectionChange",value:function(e){var n=this.contentEditable.current,t=n&&n.ownerDocument;if(t){var r=t.getSelection();r&&this.isInside(r.anchorNode,n)&&this.isInside(r.extentNode,n)&&this.handleCaretPosition(e)}}},{key:"componentDidMount",value:function(){var e=this.contentEditable.current;(e&&e.ownerDocument).addEventListener("selectionchange",this.handleSelectionChange,!1),this.setState({mounted:!0})}},{key:"componentWillUnmount",value:function(){var e=this.contentEditable.current;(e&&e.ownerDocument).removeEventListener("selectionchange",this.handleSelectionChange,!1),this.setState({mounted:!1})}},{key:"forcedRevisionUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState(Nn({},e,{revision:this.state.revision+1}))}},{key:"renderPane",value:function(){if(!this.state.mounted)return"";var e=this.contentEditable.current,n=e&&e.ownerDocument;return o.a.createElement(In,{root:e,document:n,revision:this.state.revision,onChange:this.forcedRevisionUpdate})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,null),this.renderPane(),o.a.createElement(Vn,null,o.a.createElement(a.a,{innerRef:this.contentEditable,html:this.state.html,disabled:!1,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleCaretPosition,tagName:"div",className:"ContentEditable"})))}}])&&Bn(t.prototype,r),i&&Bn(t,i),n}();n.default=Kn}])});